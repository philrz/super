spq: |
  select a as b
  from (values (0,4),(1,3),(2,2)) T(a,b)
  group by a,b
  having b >= 1
  order by b

output: |
  {b:1}
  {b:2}

---

spq: |
  select a
  from (values (0,4),(1,3),(2,2)) T(a,b)
  group by a,b
  having b >= 1
  order by T.b

output: |
  {a:2}
  {a:1}
  {a:0}

---

spq: |
  pragma pg
  select a as b
  from (values (0,4),(1,3),(2,2)) T(a,b)
  group by a,b
  having b >= 1
  order by b

output: |
  {b:0}
  {b:1}
  {b:2}

---

spq: |
  pragma pg = true
  select a
  from (values (0,4),(1,3),(2,2)) T(a,b)
  group by a,b
  having b >= 1
  order by T.b

output: |
  {a:2}
  {a:1}
  {a:0}

---

spq: |
  pragma pg = true
  select a
  from (values (0,4),(1,3),(2,2)) T(a,b)
  group by a,b
  having b >= 1
  order by T.b

output: |
  {a:2}
  {a:1}
  {a:0}

---

spq: |
  pragma pg=true
  select
    ( select collect(a) from (
        select a/2 as a
        from (values (0),(1),(2)) T(a)
        group by a
        order by a )
    ) as x,
    ( pragma pg=false
      select collect(a) from (
        select a/2 as a
        from (values (0),(1),(2)) T(a)
        group by a
        order by a )
    ) as y,
    ( select collect(a) from (
        select a/2 as a
        from (values (0),(1),(2)) T(a)
        group by a
        order by a )
    ) as z

output: |
  {x:[0,0,1],y:[0,1],z:[0,0,1]}
