script: |
  super compile -C -O "
    select *
    from (values (1,'badgers')) as teams(id,team)
    inner join (values (1,1,'blake','P')) as players(id,team_id,player,position) on teams.id = players.team_id
    where players.position = 'P' and 'badgers' = team
  "
  echo // ===
  super compile -C -O "
    select *
    from (values (1)) as t1(a1), (values (1)) as t2(a2), (values (1)) as t3(a3)
    where a1 in [1,5,9]
      and a1 in |[1,5,9]|
      and a3 in (1,5,[9,11])
      and (1 == a2 or a2 == 2)
      and 1 == 1
  "

outputs:
  - name: stdout
    data: |
      null
      | fork
        (
          values {id:1,team:"badgers"}
          | where team=="badgers"
        )
        (
          values {id:1,team_id:1,player:"blake",position:"P"}
          | where position=="P"
        )
      | inner hashjoin as {left,right} on id==team_id
      | values {id:left.id,team:left.team,id_1:right.id,team_id:right.team_id,player:right.player,position:right.position}
      | output main
      // ===
      null
      | fork
        (
          fork
            (
              values {a1:1}
              | where a1 in [1,5,9] and a1 in |[1,5,9]|
            )
            (
              values {a2:1}
              | where a2==1 or a2==2
            )
          | cross join as {left,right}
        )
        (
          values {a3:1}
          | where a3 in {c0:1,c1:5,c2:[9,11]}
        )
      | cross join as {left,right}
      | where 1==1
      | values {a1:left.left.a1,a2:left.right.a2,a3:right.a3}
      | output main
